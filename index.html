<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Login</title>
    <link href="index.css" rel="stylesheet">
</head>

<body>
    <div class="head">
        <img src="" alt="">
        <img src="" alt="">
    </div>
    <div class="main">
        <div class="step1" id="step1">
            <h1>Step 1</h1>
            <h2>Watch Video</h2>
            <p>Watch a short video until end.</p>
            <div id="wb_MediaPlayer1">
                <video id="MediaPlayer1" controls preload="auto" playsinline>
                </video>
            </div>
        </div>
        <div class="step2" id="step2">
            <h1>Step 2</h1>
            <h2>Connect to Wi-Fi</h2>
            <p>Tap/Press "Connect" button after the video to connect.</p>
            <button id="Button1" class="inactiveButton" onclick="return Login()">Connect</button>
        </div>


    </div>


    <script>

        var modal = document.getElementById("myModal");
        let list = [
            {
                t: 50, //time in seconds
                s: "./a/bewts.mp4", //file name
                type: "video", //file type
            }, {
                t: 32, //time in seconds
                s: "./a/dgspbe.mp4", //file name
                type: "video", //file type
            }, {
                t: 48, //time in seconds
                s: "./a/lgwsp.mp4", //file name
                type: "video", //file type
            }, {
                t: 26, //time in seconds
                s: "./a/spbe.mp4", //file name
                type: "video", //file type
            }, {
                t: 60, //time in seconds
                s: "./a/spbeg.mp4", //file name
                type: "video", //file type
            }, {
                t: 42, //time in seconds
                s: "./a/spebwt.mp4", //file name
                type: "video", //file type
            }
        ];
        let video = document.querySelector("video");
        var videoWatched = false;
        var videoTimeElaped = false;


        function Login() {
            if (videoTimeElaped && videoWatched) {
                window.alert("Tahnks for watching");
            } else {
                window.alert("Please watch the video!!");

            }
        }
        function close() {
            modal.style.display = "none";
        }
        function LoadVideo() {
            let index = Math.floor(Math.random() * (list.length - 1));
            loadVideo(index);
        }
        function loadVideo(i) {
            if (list[i].type == "video") {
                let t = list[i].t * 1000;
                //Disable modal
                setTimeout(e => {
                    videoTimeElaped = true;
                }, t);
                video.src = list[i].s;
                video.onended = (e) => {
                    document.querySelector("#Button1").classList.remove("inactiveButton");
                    videoWatched = true;
                    modal.style.display = "none";
                }
                // video.oncanplaythrough = (e) => { video.play(); };
            }
        }
        LoadVideo();
    </script>
</body>

</html>